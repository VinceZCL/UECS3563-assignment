<div class="profile-container">
  @if (!user) {
    <div class="loading">
      <h1>Loading Profile...</h1>
    </div>
  } @else {
    <div class="profile-card">
      <h2 class="profile-heading">User Profile</h2>
      <div class="profile-info">
        <p><strong>Username:</strong> {{ user.name }}</p>
        <p><strong>User ID:</strong> {{ user.id }}</p>
      </div>

      <button (click)="toggleEdit()" class="edit-button">
        {{ mode ? 'Cancel' : 'Edit Profile' }}
      </button>

      @if (mode) {
        <form [formGroup]="form" (ngSubmit)="submitEdit()" class="edit-form">
          <div class="form-group">
            <label>Old Name</label>
            <input type="text" formControlName="old_name" />
          </div>

          <div class="form-group">
            <label>Old Password</label>
            <input type="password" formControlName="old_password" />
          </div>

          <div class="form-group">
            <label>New Name</label>
            <input type="text" formControlName="new_name" />
          </div>

          <div class="form-group">
            <label>New Password</label>
            <input type="password" formControlName="new_password" />
          </div>

          @if (error) {
            <p class="err">{{error}}</p>
          }

          <button type="submit" class="submit-button">
            Save Changes
          </button>
        </form>
      }
    </div>
  }
</div>
